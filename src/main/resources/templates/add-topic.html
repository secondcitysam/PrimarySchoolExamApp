<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Add Topic</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<!-- ALSO FIX FRAGMENT USAGE -->
<div th:replace="~{fragments/teacher-navbar :: navbar}"></div>

<main>
    <div class="card">
        <h2>Add Topic</h2>

        <form id="f">
            <input id="topicName" placeholder="Topic Name" required>
            <input id="desc" placeholder="Short Description">
            <button type="submit">Add Topic</button>
        </form>

        <p id="msg" style="color:red;"></p>
    </div>

</main>
<script>
    document.getElementById("f").addEventListener("submit", async e => {
        e.preventDefault();

        const res = await fetch('/api/teacher/topics', {
            method: 'POST',
            credentials: 'include',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({
                name: document.getElementById("topicName").value,
                description: document.getElementById("desc").value
            })
        });

        if (res.ok) {
            location.href = '/teacher/topics';
        } else {
            document.getElementById("msg").innerText = await res.text();
        }
    });
</script>

</body>
</html>
